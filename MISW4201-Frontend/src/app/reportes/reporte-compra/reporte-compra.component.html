<app-encabezado></app-encabezado>

<div
  *ngIf="cargando"
  class="loading"
  style="
    background-color: #ffffff;
    color: #574dcf;
    padding: 1rem;
    border-radius: 0.5rem;
    text-align: center;
    border: 1px solid #d3d0f5;
  "
>
  Cargando reporte...
</div>

<div
  *ngIf="error"
  class="alert alert-danger"
  style="
    background-color: #ffe6e6;
    color: #b71c1c;
    border-radius: 0.5rem;
    padding: 1rem;
  "
>
  {{ error }}
</div>

<div
  *ngIf="reporte && !cargando"
  style="
    background-color: #ffffff;
    color: #574dcf;
    padding: 2rem;
    border-radius: 1rem;
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.05);
  "
>
  <h2 style="text-align: center; margin-bottom: 1.5rem">Reporte de Compra</h2>

  <p style="font-size: 1.1rem; font-weight: 500">
    <strong>Total del men√∫:</strong> {{ reporte.total | currency }}
  </p>

  <div
    *ngFor="let receta of reporte.recetas"
    style="
      margin-bottom: 2rem;
      border: 1px solid #d3d0f5;
      border-radius: 0.75rem;
      padding: 1rem;
      background-color: #f9f9ff;
    "
  >
    <h3 style="margin-bottom: 1rem">
      {{ receta.nombre }} ({{ receta.cantidad_recetas }} recetas)
    </h3>

    <div style="overflow-x: auto">
      <table
        class="table table-striped table-bordered"
        style="min-width: 600px"
      >
        <thead style="background-color: #d3d0f5; color: #574dcf">
          <tr>
            <th>Ingrediente</th>
            <th>Cantidad Unitaria</th>
            <th>Cantidad Total</th>
            <th>Proveedor</th>
            <th>Precio Unitario</th>
            <th>Costo Total</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let ing of receta.ingredientes">
            <td>{{ ing.nombre }}</td>
            <td>{{ ing.cantidad_unitaria }}</td>
            <td>{{ ing.cantidad_total }}</td>
            <td>{{ ing.proveedor || "No disponible" }}</td>
            <td>{{ ing.precio_unitario | currency }}</td>
            <td>{{ ing.costo_total | currency }}</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
